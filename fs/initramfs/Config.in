config BR2_TARGET_ROOTFS_INITRAMFS
	bool "initial RAM filesystem linked into linux kernel"
	depends on BR2_LINUX_KERNEL
	help
	  Integrate a cpio archive as an initramfs inside the kernel
	  image. This integration will take place automatically.

if BR2_TARGET_ROOTFS_INITRAMFS

choice
	prompt "Initramfs cpio archive"
	default BR2_INITRAMFS_USE_ROOTFS
	help
	  To accomodate for various scenarios when used for initial
	  RAM filesystem, different options for creation are
	  available.

config BR2_INITRAMFS_USE_ROOTFS
	bool "generate from root filesystem"
	select BR2_TARGET_ROOTFS_CPIO
	help
	  A rootfs.cpio file will be generated in the images/ directory.
	  This is the archive that will be included in the kernel image.
	  The default rootfs compression set in the kernel configuration
	  is used, regardless of how buildroot's cpio archive is configured.

	  Note that enabling initramfs together with another filesystem
	  formats doesn't make sense: you would end up having two
	  identical root filesystems, one embedded inside the kernel
	  image, and one separately.


config BR2_INITRAMFS_USE_OTHER
	bool "generate separately"
	help
	  It is assumed that the cpio archive is generated externally 
	  and will be present at images/rootfs.cpio when it is needed.

	  This option may be used with a post-build hook to generate 
	  and use an initial RAM filesystem that is not the same as
	  root filesystem.

	  The compression options for the cpio archive must be set
	  separately in the kernel configuration according to the 
	  compression used for the externally generated cpio archive.

	  Note that using this option along with cpio archive filesytem
	  target is the same as selecting the "create from root 
	  filesystem" option.
	  
endchoice

endif # BR2_TARGET_ROOTFS_INITRAMFS

comment "initramfs needs a Linux kernel to be built"
	depends on !BR2_LINUX_KERNEL
